- @page_title = t '.page_title', :vehicle_title => @vehicle.title

- content_for :sidebar_actions do
  %li= link_to t('.action.reports'), reports_admin_vehicle_path(@vehicle)
  %li= link_to t('.action.map'), map_admin_vehicle_path(@vehicle)
  - if can? :manage, @vehicle
    %li= link_to t('.action.calibration'), calibration_admin_vehicle_path(@vehicle)

%form.form-horizontal
  - %w{ name vehicle_type tracker_name imei fuel_sensor reg_number fuel_norm fuel_tank fuel_tank2 }.each do |field_name|
    - next if %w{ imei tracker_name fuel_sensor }.include?(field_name) and !can?(:manage, @vehicle)
    - if !@vehicle.send(field_name).blank?
      .control-group
        %label.control-label= t('admin.vehicles.form.field.' + field_name)
        .controls
          %span.uneditable-input
            - if 'fuel_sensor' == field_name
              = @vehicle.fuel_sensor.fuel_sensor_model.title
            - elsif 'imei' == field_name
              = link_to(@vehicle.imei, { :controller => 'admin/tools', :action => 'packets_monitor', :imei => @vehicle.imei }, :class => 'ico-monitor')
            - elsif 'vehicle_type' == field_name
              = @vehicle.vehicle_type.title
            - else
              = @vehicle.send(field_name)

  - readonly_field(t('admin.vehicles.form.field.user'), @vehicle.user.login) if can? :manage, @vehicle
  - readonly_field(t('admin.vehicles.form.field.description'), simple_format(@vehicle.description)) if !@vehicle.description.blank?
  - readonly_field(t('admin.vehicles.form.field.comment'), simple_format(@vehicle.comment)) if can?(:manage, @vehicle) and !@vehicle.comment.blank?
  - readonly_field(t('admin.vehicles.form.field.debt'), @vehicle.debt) if can?(:manage, @vehicle) and !@vehicle.debt.zero?

  .form-actions
    - if can? :edit, @vehicle
      = link_to t('.button.edit'), edit_admin_vehicle_path(@vehicle), :class => 'btn btn-primary'
    = link_to t('.button.back'), admin_vehicles_path, :class => 'btn'
    - if can? :destroy, @vehicle
      = link_to t('.button.clear_data'), clear_admin_vehicle_path(@vehicle), :class => 'btn'
      = link_to t('.button.delete'), admin_vehicle_path(@vehicle), :class => 'btn btn-danger', :method => :delete, 'data-confirm' => t('.button.confirm_delete')
